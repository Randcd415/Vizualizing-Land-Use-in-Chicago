"0","master_wide_filt <- master_wide[which(!is.na(master_wide$change_rank)),]"
"0","up_neigh <- master_wide_filt$REGION[order(master_wide_filt$change_rank, decreasing = T)] %>% head(2)"
"0","down_neigh <- master_wide_filt$REGION[order(master_wide_filt$change_rank, decreasing = T)] %>% tail(2)"
"0","changing_neigh <- append(up_neigh, down_neigh)"
"0","losing_neigh <- master_wide_filt$REGION[which(master_wide_filt$change_rank < 0)]"
"0","rm(master_wide_filt)"
"0","p1 <- master %>%"
"0","  filter(YEAR > 1995, !is.na(RegionName)) %>%"
"0","  mutate(lost_rank = ifelse(REGION %in% losing_neigh, -1, 1)) %>%"
"0","ggplot(aes(x = YEAR, y = mean_rank, group = REGION)) +"
"0","  geom_line(aes(col = lost_rank)) +"
"0","  gghighlight(REGION %in% changing_neigh, label_key = RegionName, unhighlighted_colour = alpha(""white"", 0.2)) +"
"0","          labs("
"0","          title=""Logan Square and Bowmanville Now Among Most Expensive Neighborhoods"","
"0","          subtitle=""Neighborhoods that experienced largest change in home value rank"","
"0","          caption=""Data from Zillow"","
"0","          x=""Year"","
"0","          y=""Neighborhood Rank"""
"0","          ) +"
"0","          theme_classic() +"
"0","          scale_colour_gradient2(low = ""#00B28F"", high = ""#FF5416"") +"
"0","          scale_y_reverse() +"
"0","          theme_custom +"
"0","   annotate(""text"", label=""Most Expensive \nNeighborhoods"", "
"0","            x=1997.6, y=5.8, alpha = .6, family=""Segoe UI Bold"", size = 3) +"
"0"," annotate(""text"", label=""Least Expensive \nNeighborhoods"", "
"0","          x=1997.6, y=106, alpha = .6, family=""Segoe UI Bold"", size = 3) "
"2","You set use_group_by = TRUE, but grouped calculation failed.
Falling back to ungrouped filter operation..."
"0","plot_data <- neighborhood_master_wide %>%"
"0","              filter(RegionID != ""403159"") %>%"
"0","              mutate(highlight = RegionID %in% changing_neigh)"
"0","plot_data$highlight[which(plot_data$RegionID %in% down_neigh)] <- -1"
"0","p2 <-  ggplot(plot_data, aes(x = long, y = lat)) +"
"0","    geom_polygon(aes(fill = highlight, group = RegionID), alpha = .5) +"
"0","    geom_path(aes(group = group),"
"0","              color = ""grey"", size = 0.01, alpha = 0.4) +"
"0","    gghighlight(highlight != 0, label_key = RegionName,  unhighlighted_colour = alpha(""grey"", 0.2)) +"
"0","    scale_fill_gradient2(low = ""#00B28F"", high = ""#FF5416"") +"
"0","  coord_equal() +"
"0","    theme_minimal() +"
"0","    theme(axis.line = element_blank(),"
"0","    axis.text.x = element_blank(),"
"0","    axis.text.y = element_blank(),"
"0","    axis.ticks = element_blank(),"
"0","    axis.title.x = element_blank(),"
"0","    axis.title.y = element_blank(),"
"0","    panel.grid.major = element_blank(),"
"0","    panel.grid.minor = element_blank()) +"
"0","    theme(legend.position=""none"") "
"2","You set use_group_by = TRUE, but grouped calculation failed.
Falling back to ungrouped filter operation..."
"2","You set use_group_by = TRUE, but grouped calculation failed.
Falling back to ungrouped filter operation..."
"0","    "
"0","rm(plot_data)"
"0","grid.newpage()"
