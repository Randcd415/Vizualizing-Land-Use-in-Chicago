"0","knitr::opts_chunk$set(echo = TRUE)"
"0","#rm(list = ls())"
"0","library(data.table)"
"0","library(rgdal)"
"0","library(sp)"
"0","library(rgeos)"
"0","library(tidyverse)"
"0","library(magrittr)"
"0","library(here)"
"0","library(stringr)"
"0","library(tidycensus)"
"0","library(sf)"
"0","#get list of all files in directory"
"0","shp_files <- list.files(here(""raw_data"",""zoning_data""))"
"0","read_shps <- function(x){"
"0","  #get directory of specific shapefile"
"0","  file <- paste0(here(""raw_data"", ""zoning_data""), ""/"", x)"
"0","  #get layer name of shapfile in file directory"
"0","  layer <- list.files(file)[1] %>% substr(1, nchar(list.files(file)[1]) -4)"
"0","  #read in shapefile"
"0","  temp <- readOGR(file, layer = layer)"
"0","  #make all column names capitals"
"0","  names(temp) <- names(temp) %>% toupper()"
"0","  #convert ordinance dates from string to date format"
"0","  temp@data$EDIT_DATE <- temp@data$EDIT_DATE %>% as.Date()"
"0","  #assign shapefile name indicating its timeperiod"
"0","  name <- str_replace_all(layer, "" "", ""_"")"
"0","  name <- substr(name, nchar(name) - 6, nchar(name))"
"0","  assign(name, temp, envir = .GlobalEnv)"
"0","}"
"0","  "
"0","#use custom function to read in all shapefiles"
"0","sapply(shp_files, read_shps) %>% invisible()"
"1","OGR data source with driver:"
"1"," "
"1","ESRI Shapefile"
"1"," "
"1","
"
"1","Source: """
"1","C:\Users\7450\Documents\Harris MPP\Q5\Data Viz\project_chicago_zoning\raw_data\zoning_data\Chicago zoning 2012-08-01"
"1",""", layer: """
"1","zoning august 2012"
"1",""""
"1","
"
"1","with"
"1"," "
"1","11278"
"1"," "
"1","features"
"1","
"
"1","It has"
"1"," "
"1","10"
"1"," "
"1","fields"
"1","
"
"2","Z-dimension discarded"
"1","OGR data source with driver:"
"1"," "
"1","ESRI Shapefile"
"1"," "
"1","
"
"1","Source: """
"1","C:\Users\7450\Documents\Harris MPP\Q5\Data Viz\project_chicago_zoning\raw_data\zoning_data\Chicago zoning 2014-09"
"1",""", layer: """
"1","chicago_zoning_SEP2014"
"1",""""
"1","
"
"1","with"
"1"," "
"1","11677"
"1"," "
"1","features"
"1","
"
"1","It has"
"1"," "
"1","11"
"1"," "
"1","fields"
"1","
"
"1","Integer64 fields read as strings: "
"1"," "
"1","gid zone_type pd_num"
"1"," "
"1","
"
"1","OGR data source with driver:"
"1"," "
"1","ESRI Shapefile"
"1"," "
"1","
"
"1","Source: """
"1","C:\Users\7450\Documents\Harris MPP\Q5\Data Viz\project_chicago_zoning\raw_data\zoning_data\Chicago zoning 2015-08"
"1",""", layer: """
"1","DPD_FOIA_ZON_AUG2015"
"1",""""
"1","
"
"1","with"
"1"," "
"1","11918"
"1"," "
"1","features"
"1","
"
"1","It has"
"1"," "
"1","19"
"1"," "
"1","fields"
"1","
"
"1","Integer64 fields read as strings: "
"1"," "
"1","OBJECTID ZONING_ID CASE_NUMBE"
"1"," "
"1","
"
"1","OGR data source with driver:"
"1"," "
"1","ESRI Shapefile"
"1"," "
"1","
"
"1","Source: """
"1","C:\Users\7450\Documents\Harris MPP\Q5\Data Viz\project_chicago_zoning\raw_data\zoning_data\Chicago zoning 2015-11"
"1",""", layer: """
"1","DPD_FOIA_ZON_18NOV2015"
"1",""""
"1","
"
"1","with"
"1"," "
"1","12015"
"1"," "
"1","features"
"1","
"
"1","It has"
"1"," "
"1","19"
"1"," "
"1","fields"
"1","
"
"1","Integer64 fields read as strings: "
"1"," "
"1","OBJECTID ZONING_ID CASE_NUMBE"
"1"," "
"1","
"
"1","OGR data source with driver:"
"1"," "
"1","ESRI Shapefile"
"1"," "
"1","
"
"1","Source: """
"1","C:\Users\7450\Documents\Harris MPP\Q5\Data Viz\project_chicago_zoning\raw_data\zoning_data\Chicago zoning 2016-05-19"
"1",""", layer: """
"1","Zoning_asof_19MAY2016"
"1",""""
"1","
"
"1","with"
"1"," "
"1","12162"
"1"," "
"1","features"
"1","
"
"1","It has"
"1"," "
"1","19"
"1"," "
"1","fields"
"1","
"
"1","Integer64 fields read as strings: "
"1"," "
"1","OBJECTID ZONING_ID CASE_NUMBE"
"1"," "
"1","
"
"1","OGR data source with driver:"
"1"," "
"1","ESRI Shapefile"
"1"," "
"1","
"
"1","Source: """
"1","C:\Users\7450\Documents\Harris MPP\Q5\Data Viz\project_chicago_zoning\raw_data\zoning_data\Chicago zoning 2016-09"
"1",""", layer: """
"1","Chicago_Zoning_Export_23SEP2016"
"1",""""
"1","
"
"1","with"
"1"," "
"1","12254"
"1"," "
"1","features"
"1","
"
"1","It has"
"1"," "
"1","19"
"1"," "
"1","fields"
"1","
"
"1","Integer64 fields read as strings: "
"1"," "
"1","OBJECTID ZONING_ID CASE_NUMBE"
"1"," "
"1","
"
"1","OGR data source with driver:"
"1"," "
"1","ESRI Shapefile"
"1"," "
"1","
"
"1","Source: """
"1","C:\Users\7450\Documents\Harris MPP\Q5\Data Viz\project_chicago_zoning\raw_data\zoning_data\Chicago zoning 2016-11"
"1",""", layer: """
"1","Zoning_asof_30NOV2016"
"1",""""
"1","
"
"1","with"
"1"," "
"1","12342"
"1"," "
"1","features"
"1","
"
"1","It has"
"1"," "
"1","19"
"1"," "
"1","fields"
"1","
"
"1","Integer64 fields read as strings: "
"1"," "
"1","OBJECTID ZONING_ID CASE_NUMBE"
"1"," "
"1","
"
"1","OGR data source with driver:"
"1"," "
"1","ESRI Shapefile"
"1"," "
"1","
"
"1","Source: """
"1","C:\Users\7450\Documents\Harris MPP\Q5\Data Viz\project_chicago_zoning\raw_data\zoning_data\Chicago zoning 2017-02-14"
"1",""", layer: """
"1","Zoning_Ordinances_to_FEB2017"
"1",""""
"1","
"
"1","with"
"1"," "
"1","12438"
"1"," "
"1","features"
"1","
"
"1","It has"
"1"," "
"1","19"
"1"," "
"1","fields"
"1","
"
"1","Integer64 fields read as strings: "
"1"," "
"1","OBJECTID ZONING_ID CASE_NUMBE"
"1"," "
"1","
"
"1","OGR data source with driver:"
"1"," "
"1","ESRI Shapefile"
"1"," "
"1","
"
"1","Source: """
"1","C:\Users\7450\Documents\Harris MPP\Q5\Data Viz\project_chicago_zoning\raw_data\zoning_data\Zoning_asof_05NOV2018"
"1",""", layer: """
"1","Zoning_asof_05NOV2018"
"1",""""
"1","
"
"1","with"
"1"," "
"1","13072"
"1"," "
"1","features"
"1","
"
"1","It has"
"1"," "
"1","19"
"1"," "
"1","fields"
"1","
"
"1","Integer64 fields read as strings: "
"1"," "
"1","OBJECTID ZONING_ID CASE_NUMBE"
"1"," "
"1","
"
"2","Dropping null geometries: 106, 1545, 3909"
"1","OGR data source with driver:"
"1"," "
"1","ESRI Shapefile"
"1"," "
"1","
"
"1","Source: """
"1","C:\Users\7450\Documents\Harris MPP\Q5\Data Viz\project_chicago_zoning\raw_data\zoning_data\Zoning_asof_07JAN2019"
"1",""", layer: """
"1","Zoning_asof_07JAN2019"
"1",""""
"1","
"
"1","with"
"1"," "
"1","13132"
"1"," "
"1","features"
"1","
"
"1","It has"
"1"," "
"1","19"
"1"," "
"1","fields"
"1","
"
"1","Integer64 fields read as strings: "
"1"," "
"1","OBJECTID ZONING_ID CASE_NUMBE"
"1"," "
"1","
"
"2","Dropping null geometries: 1917, 4980, 5381"
"1","OGR data source with driver:"
"1"," "
"1","ESRI Shapefile"
"1"," "
"1","
"
"1","Source: """
"1","C:\Users\7450\Documents\Harris MPP\Q5\Data Viz\project_chicago_zoning\raw_data\zoning_data\Zoning_asof_08AUG2018"
"1",""", layer: """
"1","Zoning_asof_08AUG2018"
"1",""""
"1","
"
"1","with"
"1"," "
"1","13000"
"1"," "
"1","features"
"1","
"
"1","It has"
"1"," "
"1","19"
"1"," "
"1","fields"
"1","
"
"1","Integer64 fields read as strings: "
"1"," "
"1","OBJECTID ZONING_ID CASE_NUMBE"
"1"," "
"1","
"
"2","Dropping null geometries: 3753, 9648"
"1","OGR data source with driver:"
"1"," "
"1","ESRI Shapefile"
"1"," "
"1","
"
"1","Source: """
"1","C:\Users\7450\Documents\Harris MPP\Q5\Data Viz\project_chicago_zoning\raw_data\zoning_data\Zoning_asof_09OCT2018"
"1",""", layer: """
"1","Zoning_asof_09OCT2018"
"1",""""
"1","
"
"1","with"
"1"," "
"1","13000"
"1"," "
"1","features"
"1","
"
"1","It has"
"1"," "
"1","19"
"1"," "
"1","fields"
"1","
"
"1","Integer64 fields read as strings: "
"1"," "
"1","OBJECTID ZONING_ID CASE_NUMBE"
"1"," "
"1","
"
"2","Dropping null geometries: 5974, 6026"
"1","OGR data source with driver:"
"1"," "
"1","ESRI Shapefile"
"1"," "
"1","
"
"1","Source: """
"1","C:\Users\7450\Documents\Harris MPP\Q5\Data Viz\project_chicago_zoning\raw_data\zoning_data\Zoning_asof_27APR2017"
"1",""", layer: """
"1","Zoning_asof_27APR2017"
"1",""""
"1","
"
"1","with"
"1"," "
"1","12473"
"1"," "
"1","features"
"1","
"
"1","It has"
"1"," "
"1","19"
"1"," "
"1","fields"
"1","
"
"1","Integer64 fields read as strings: "
"1"," "
"1","OBJECTID ZONING_ID CASE_NUMBE"
"1"," "
"1","
"
"1","OGR data source with driver:"
"1"," "
"1","ESRI Shapefile"
"1"," "
"1","
"
"1","Source: """
"1","C:\Users\7450\Documents\Harris MPP\Q5\Data Viz\project_chicago_zoning\raw_data\zoning_data\Zoning_asof_28FEB2018"
"1",""", layer: """
"1","Zoning_asof_28FEB2018"
"1",""""
"1","
"
"1","with"
"1"," "
"1","12814"
"1"," "
"1","features"
"1","
"
"1","It has"
"1"," "
"1","19"
"1"," "
"1","fields"
"1","
"
"1","Integer64 fields read as strings: "
"1"," "
"1","OBJECTID ZONING_ID CASE_NUMBE"
"1"," "
"1","
"
"1","OGR data source with driver:"
"1"," "
"1","ESRI Shapefile"
"1"," "
"1","
"
"1","Source: """
"1","C:\Users\7450\Documents\Harris MPP\Q5\Data Viz\project_chicago_zoning\raw_data\zoning_data\Zoning_asof_28MAR2018"
"1",""", layer: """
"1","Zoning_asof_28MAR2018"
"1",""""
"1","
"
"1","with"
"1"," "
"1","12919"
"1"," "
"1","features"
"1","
"
"1","It has"
"1"," "
"1","19"
"1"," "
"1","fields"
"1","
"
"1","Integer64 fields read as strings: "
"1"," "
"1","OBJECTID ZONING_ID CASE_NUMBE"
"1"," "
"1","
"
"1","OGR data source with driver:"
"1"," "
"1","ESRI Shapefile"
"1"," "
"1","
"
"1","Source: """
"1","C:\Users\7450\Documents\Harris MPP\Q5\Data Viz\project_chicago_zoning\raw_data\zoning_data\Zoning_asof_29JUL2018"
"1",""", layer: """
"1","Zoning_asof_29JUL2018"
"1",""""
"1","
"
"1","with"
"1"," "
"1","12990"
"1"," "
"1","features"
"1","
"
"1","It has"
"1"," "
"1","19"
"1"," "
"1","fields"
"1","
"
"1","Integer64 fields read as strings: "
"1"," "
"1","OBJECTID ZONING_ID CASE_NUMBE"
"1"," "
"1","
"
"1","OGR data source with driver:"
"1"," "
"1","ESRI Shapefile"
"1"," "
"1","
"
"1","Source: """
"1","C:\Users\7450\Documents\Harris MPP\Q5\Data Viz\project_chicago_zoning\raw_data\zoning_data\Zoning_asof_29MAY2018"
"1",""", layer: """
"1","Zoning_asof_29MAY2018"
"1",""""
"1","
"
"1","with"
"1"," "
"1","12929"
"1"," "
"1","features"
"1","
"
"1","It has"
"1"," "
"1","19"
"1"," "
"1","fields"
"1","
"
"1","Integer64 fields read as strings: "
"1"," "
"1","OBJECTID ZONING_ID CASE_NUMBE"
"1"," "
"1","
"
"0","#fix a few things "
"0","AUG2012 <- st_2012"
"0","AUG2012 <- spTransform(AUG2012, proj4string(JAN2019))"
"0","SEP2014 <- spTransform(SEP2014, proj4string(JAN2019))"
"0","rm(st_2012)"
"0","#read in ward data"
"0","wards <- readOGR(here(""raw_data"", ""Boundaries - Wards (2015-)""), layer = ""geo_export_2308d057-9a78-43d2-94ac-9978dec82556"")"
"1","OGR data source with driver:"
"1"," "
"1","ESRI Shapefile"
"1"," "
"1","
"
"1","Source: """
"1","C:\Users\7450\Documents\Harris MPP\Q5\Data Viz\project_chicago_zoning\raw_data\Boundaries - Wards (2015-)"
"1",""", layer: """
"1","geo_export_2308d057-9a78-43d2-94ac-9978dec82556"
"1",""""
"1","
"
"1","with"
"1"," "
"1","50"
"1"," "
"1","features"
"1","
"
"1","It has"
"1"," "
"1","3"
"1"," "
"1","fields"
"1","
"
"0","wards <- spTransform(wards, proj4string(SEP2016))"
"0","#read in landmark data"
"0","landmarks_shp <-  readOGR(here(""raw_data"", ""Individual Landmarks""), layer = ""geo_export_3c7a72b6-7cfa-4d1b-85bf-bc7d064e06e7"")"
"1","OGR data source with driver:"
"1"," "
"1","ESRI Shapefile"
"1"," "
"1","
"
"1","Source: """
"1","C:\Users\7450\Documents\Harris MPP\Q5\Data Viz\project_chicago_zoning\raw_data\Individual Landmarks"
"1",""", layer: """
"1","geo_export_3c7a72b6-7cfa-4d1b-85bf-bc7d064e06e7"
"1",""""
"1","
"
"1","with"
"1"," "
"1","321"
"1"," "
"1","features"
"1","
"
"1","It has"
"1"," "
"1","6"
"1"," "
"1","fields"
"1","
"
"0","landmarks_shp <- spTransform(landmarks_shp, proj4string(JAN2019))"
